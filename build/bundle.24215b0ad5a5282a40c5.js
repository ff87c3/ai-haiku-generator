(()=>{var e={374:()=>{document.getElementById("generate-btn-eng").addEventListener("click",(function(){speechSynthesis.cancel();const t=document.querySelector("#loader");t.style.display="block";const o=document.querySelector("#haiku-output");o.innerHTML="",o.classList.remove("vertical-text"),o.classList.remove("fade-blur"),o.classList.add("flipped-text"),fetch("/api/haiku-serverless-eng",{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((r=>{t.style.display="none",o.classList.add("fade-blur"),o.innerText=r.haiku,console.log(r.haiku),function(t){const o=document.querySelector("#current-word"),r=document.getElementById("haiku-output").innerHTML;console.log(r);const s=r.split("<br>"),c=[];s.forEach(((t,r)=>{const a=new SpeechSynthesisUtterance(t);a.rate=.8,a.pitch=.8,a.lang="en-US",-1!==navigator.userAgent.indexOf("Chrome")?a.voice=e[33]:-1!==navigator.userAgent.indexOf("Safari")?a.voice=e[28]:a.voice=e[33],a.onboundary=e=>{"word"===e.name&&(n=t.substring(e.charIndex,e.charIndex+e.charLength),o.innerHTML=n,console.log("Currently speaking:",n)),r<s.length-1&&"word"===e.name&&e.charIndex+e.charLength===t.length&&setTimeout((()=>{const e=new SpeechSynthesisUtterance(" ");window.speechSynthesis.speak(e)}),3e3)},c.push(a)})),c.reduce(((e,n)=>e.then((()=>new Promise((e=>{window.speechSynthesis.speak(n),n.onend=e}))))),Promise.resolve())}(r.haiku)})).catch((e=>{console.error("Error:",e)}))}));let e=null;window.onload=function(){e=window.speechSynthesis.getVoices(),0===e.length&&(window.speechSynthesis.onvoiceschanged=()=>{e=window.speechSynthesis.getVoices()})};let n=""},550:()=>{document.getElementById("generate-btn-jp").addEventListener("click",(function(){speechSynthesis.cancel();const n=document.querySelector("#loader");n.style.display="block";const t=document.querySelector("#haiku-output");t.innerHTML="",t.classList.add("vertical-text"),t.classList.remove("fade-blur"),t.classList.remove("flipped-text"),fetch("/api/haiku-serverless-jp",{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((o=>{n.style.display="none",t.classList.add("fade-blur");const r=o.haiku.replace(/\s/g,"\n");t.innerText=r,console.log(o.haiku),function(n){const t=document.querySelector("#current-word"),o=new SpeechSynthesisUtterance(n);o.lang="ja-JP";const r=window.speechSynthesis.getVoices().find((e=>"ja-JP"===e.lang));r&&(o.voice=r),o.rate=.6,o.onboundary=o=>{"word"===o.name&&(e=n.substring(o.charIndex,o.charIndex+o.charLength),t.innerHTML=e,console.log("Currently speaking:",e))},o.onend=()=>{t.innerHTML=""},window.speechSynthesis.speak(o)}(o.haiku)})).catch((e=>{console.error("Error:",e)}))}));let e=""}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var s=n[o]={exports:{}};return e[o](s,s.exports,t),s.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";t(374),t(550)})()})();